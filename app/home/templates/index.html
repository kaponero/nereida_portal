{% extends "accounts/base.html" %}

{% block title %}Portal{% endblock %}

{# ===============================
   CSS específico de la página
   =============================== #}
{% block links %}
<link rel="stylesheet"
      href="{{ url_for('base_blueprint.static', filename='asset/css/portalstyles.css') }}">
<link rel="stylesheet"
      href="{{ url_for('base_blueprint.static', filename='asset/css/pop-up-img.css') }}">
{% endblock %}

{# ===============================
   Contenido principal
   =============================== #}
{% block content %}

{% if subscriptor.vouchers %}
<div class="cardBox">
    <table>
        <tr>
            <td colspan="2">
                <div class="card">
                    <div>
                        <div class="data">
                            {{ subscriptor.vouchers_total_to_pay
                               | currencyformat(subscriptor.vouchers[-1].currency) }}
                        </div>
                        <div class="cardName">Importe a pagar hoy</div>
                    </div>
                    <div class="iconBx">
                        <ion-icon style="color:green" name="logo-usd"></ion-icon>
                    </div>
                </div>

                <div class="card">
                    <div>
                        {% if subscriptor.vouchers_total_to_pay > 0 %}
                            <div class="data">Pendiente de pago</div>
                        {% else %}
                            <div class="data">No registra deudas</div>
                        {% endif %}
                        <div class="cardName">Estado</div>
                    </div>
                    <div class="iconBx">
                        {% if subscriptor.vouchers_total_to_pay > 0 %}
                            <ion-icon style="color:brown" name="alert-outline"></ion-icon>
                        {% else %}
                            <ion-icon style="color:green" name="checkmark-outline"></ion-icon>
                        {% endif %}
                    </div>
                </div>
            </td>
        </tr>

        {% if subscriptor.automatic_debit %}
        <tr>
            <td>
                <div class="card">
                    <div class="cardName">
                        Usted se encuentra sujeto a débito automático
                    </div>
                    <div class="iconBx">
                        <ion-icon name="card-outline"></ion-icon>
                    </div>
                </div>
            </td>
        </tr>
        {% endif %}
    </table>
</div>
{% endif %}

{% endblock content %}

{# ===============================
   JavaScript específico
   =============================== #}
{% block javascripts %}

<script type="text/javascript"
        src="{{ url_for('base_blueprint.static', filename='asset/js/main.js') }}"></script>

<!-- Ionicons -->
<script type="module"
        src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule
        src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

<script>
    function openPopup(popupId) {
        document.getElementById(popupId).style.display = 'flex';
    }

    function closePopup(popupId) {
        document.getElementById(popupId).style.display = 'none';
    }
</script>

{% endblock javascripts %}
